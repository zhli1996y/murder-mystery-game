<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–­å‰‘å±±åº„çš„æ€çŒªåˆ€ - å‰§æœ¬æ€</title>
    <style>
        :root {
            --bg: #1a1a1d;
            --card-bg: #25252b;
            --text: #e0e0e0;
            --accent: #c0392b;
            --primary: #2980b9;
        }
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; background: var(--bg); color: var(--text); margin: 0; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        
        .step-bar { display: flex; justify-content: space-between; margin-bottom: 20px; background: var(--card-bg); padding: 10px; border-radius: 8px; font-size: 0.85rem; }
        .step { color: #555; transition: 0.3s; }
        .step.active { color: var(--accent); font-weight: bold; border-bottom: 2px solid var(--accent); }

        .card { background: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); min-height: 300px; }
        h1, h2 { color: var(--accent); text-align: center; }
        .script-text { white-space: pre-wrap; background: #1e1e24; padding: 15px; border-radius: 5px; border: 1px solid #333; margin-top: 15px; font-size: 1.05rem; text-align: justify; }
        
        .clue-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .clue-card { background: #34495e; padding: 10px; border-radius: 4px; font-size: 0.9rem; border-left: 4px solid var(--accent); }

        select, input { width: 100%; padding: 12px; margin: 10px 0; background: #111; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        button { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1rem; margin-top: 20px; transition: 0.2s; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-secondary { background: #7f8c8d; margin-top: 10px; }

        .hidden { display: none; }
        .warning { color: #f1c40f; font-size: 0.8rem; margin-top: 5px; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <div class="step-bar">
        <span id="step1" class="step active">1.é€‰æ‹©è§’è‰²</span>
        <span id="step2" class="step">2.é˜…è¯»å‰§æœ¬</span>
        <span id="step3" class="step">3.æœè¯è®¨è®º</span>
        <span id="step4" class="step">4.æ­å¼€çœŸç›¸</span>
    </div>

    <div id="view1" class="card">
        <h1>å‰§æœ¬æ€ï¼š<span id="game-title-display">æœªå‘½åå‰§æœ¬</span></h1>
        <p style="text-align: center; color: #888;">æ±Ÿæ¹–ä¼ é—»ï¼šæ–­å‰‘å±±åº„åº„ä¸»èº«äº¡ï¼Œå‡¶æ‰‹ç«Ÿåœ¨èº«è¾¹ï¼Ÿ</p>
        <div style="margin-top: 40px;">
            <label>ä½ çš„æ±Ÿæ¹–åå·ï¼š</label>
            <input type="text" id="player-name" placeholder="è¯·è¾“å…¥ä½ çš„æ˜µç§°">
            <label>é€‰æ‹©ä½ çš„èº«ä»½ï¼š</label>
            <select id="role-select"></select>
            <button onclick="toStep2()">é”å®šè§’è‰²ï¼Œè¿›å…¥æ±Ÿæ¹–</button>
            <p class="warning">âš ï¸ å‰§æœ¬é•¿è¾¾1000å­—ï¼Œè¯·è€å¿ƒé˜…è¯»ï¼ŒçœŸç›¸éšè—åœ¨ç»†èŠ‚ä¸­</p>
        </div>
    </div>

    <div id="view2" class="card hidden">
        <h2 id="display-role-name">è§’è‰²å</h2>
        <div class="script-text" id="display-script">æ­£åœ¨åŠ è½½æ±Ÿæ¹–ç§˜ç±...</div>
        <button onclick="toStep3()">æˆ‘å·²äº†ç„¶äºèƒ¸ï¼Œå¼€å§‹åšå¼ˆ</button>
    </div>

    <div id="view3" class="card hidden">
        <h2>è¯æ®ä¸çº¿ç´¢åº“</h2>
        <p style="font-size: 0.9rem; color: #888;">ç»“åˆä½ çš„å‰§æœ¬ä¸ä»¥ä¸‹çº¿ç´¢ï¼Œæ‰¾å‡ºé‚£ä¸ªNPCçœŸå‡¶ï¼š</p>
        <div id="clue-container" class="clue-grid"></div>
        <button onclick="toStep4()">æˆ‘å·²è¯†ç ´çœŸç›¸ï¼ŒæŒ‡è®¤å‡¶æ‰‹</button>
        <button class="btn-secondary" onclick="toStep2()">é‡æ¸©å‰§æœ¬</button>
    </div>

    <div id="view4" class="card hidden">
        <h1 style="color: #f1c40f;">ğŸš¨ ç»ˆæå®¡åˆ¤</h1>
        <p style="text-align: center;">çœŸç›¸åªä¼šè¿Ÿåˆ°ï¼Œä»ä¸ç¼ºå¸­ã€‚è¯·è¾“å…¥è§£å¯†å£ä»¤ã€‚</p>
        
        <div style="background: #000; padding: 15px; border-radius: 8px; margin: 20px 0;">
            <label>è§£é”çœŸç›¸çš„æš—å·ï¼š</label>
            <input type="password" id="truth-pass" placeholder="è¾“å…¥æš—å·">
            <button onclick="revealTruth()">æ­å¼€è°œåº•</button>
        </div>
        
        <div id="truth-box" class="hidden">
            <h2 style="color: #2ecc71;">å¤ç›˜æ­ç§˜</h2>
            <div class="script-text" id="display-truth" style="border-color: #2ecc71;"></div>
            <button class="btn-secondary" onclick="location.reload()">é€€å‡ºæ±Ÿæ¹–</button>
        </div>
    </div>
</div>

<script>
    const CONFIG = {
        title: "æ–­å‰‘å±±åº„çš„æ€çŒªåˆ€",
        password: "666",
        roles: {
            "role_1": {
                name: "å¤§å¸ˆå…„ Â· ç”„æ­£ä¹‰",
                script: "ã€èƒŒæ™¯æ•…äº‹ã€‘\nä½ æ˜¯æ–­å‰‘å±±åº„çš„å¤§å¸ˆå…„ï¼Œæ±Ÿæ¹–äººç§°â€œä¸€å‰‘å¹³å¤©ä¸‹â€ã€‚è™½ç„¶åå­—å«æ­£ä¹‰ï¼Œä½†ä½ å…¶å®æ˜¯ä¸ªæ·±åº¦è¿‘è§†çœ¼ï¼Œè¿˜æ²¡é’±é…çœ¼é•œã€‚ä½ ä¸€ç›´æš—æ‹å°å¸ˆå¦¹ï¼Œä½†åº„ä¸»ï¼ˆä½ çš„å¸ˆçˆ¶ï¼‰ç‹¬ç‹¬å® çˆ±äºŒå¸ˆå¼Ÿè´¾ç³Šæ¶‚ï¼Œç”šè‡³æ‰“ç®—æŠŠå±±åº„ç¥–ä¼ çš„â€œæ–­æ°´å‰‘â€ä¼ ç»™ä»–ã€‚ä½ è¡¨é¢ç¨³å¦‚è€ç‹—ï¼Œå®åˆ™å†…å¿ƒæ…Œå¾—ä¸€æ‰¹ã€‚\n\nã€æ˜¨æ™šç»å†ã€‘\næ˜¨æ™š 19:00ï¼Œä½ å»æ‰¾å¸ˆçˆ¶ç†è®ºï¼Œæƒ³è®©ä»–æŠŠå‰‘ä¼ ç»™ä½ ã€‚å¸ˆçˆ¶å½“æ—¶æ­£åœ¨ä¹¦æˆ¿åƒç‚¸é¸¡ï¼Œä»–ä¸€è¾¹å•ƒé¸¡è…¿ä¸€è¾¹å˜²ç¬‘ä½ çš„è§†åŠ›ï¼šâ€œæ­£ä¹‰å•Šï¼Œä½ è¿è‹è‡éƒ½çœ‹ä¸è§ï¼Œè¿˜ç»ƒä»€ä¹ˆå‰‘ï¼Ÿä¸å¦‚å»åé™¢å¸®å¨å­ç‹äºŒæ²³æ€çŒªå§ï¼â€ä½ æ°”å¾—å·®ç‚¹å½“åœºæ‹”å‰‘ï¼Œä½†ä½ å¿ä½äº†ï¼Œå› ä¸ºä½ å‘ç°å¸ˆçˆ¶çš„ç‚¸é¸¡é‡Œä¼¼ä¹æœ‰ä¸€è‚¡å¥‡æ€ªçš„æä»å‘³ã€‚ä½ æ€€ç–‘æœ‰äººä¸‹æ¯’ï¼Œå¿ƒé‡Œæš—çˆ½ï¼šè¦æ˜¯å¸ˆçˆ¶æ­»äº†ï¼Œæˆ‘ä¸å°±æ˜¯åº„ä¸»äº†ï¼Ÿ\n\n20:00ï¼Œä½ å›æˆ¿è·¯è¿‡èµ°å»Šï¼Œçœ‹è§äºŒå¸ˆå¼Ÿè´¾ç³Šæ¶‚é¬¼é¬¼ç¥Ÿç¥Ÿåœ°ä»å¸ˆçˆ¶ä¹¦æˆ¿å‡ºæ¥ï¼Œæ‰‹é‡Œè¿˜æ‹¿ç€ä¸€å·å•çº¸ã€‚ä½ å½“æ—¶åœ¨æƒ³ï¼šéš¾é“å¸ˆçˆ¶åœ¨ä¹¦æˆ¿æ²¡çº¸äº†ï¼Ÿ\n\n21:00ï¼Œä½ å†³å®šå†å»ä¹¦æˆ¿çœ‹çœ‹ï¼Œå¦‚æœå¸ˆçˆ¶æ­»äº†ï¼Œä½ å°±é¡ºä¾¿æŠŠâ€œæ–­æ°´å‰‘â€å·èµ°ã€‚ç»“æœä½ åˆšåˆ°é—¨å£ï¼Œå°±å¬è§ä¹¦æˆ¿é‡Œä¼ æ¥ä¸€å£°å‡„æƒ¨çš„çŒªå«ã€‚ä½ å“å¾—æ‘”äº†ä¸€è·¤ï¼Œçœ¼é•œæ‰è¿›äº†è‡­æ°´æ²Ÿé‡Œã€‚ä½ æ‘¸é»‘å›æˆ¿ï¼Œç»“æœèµ°é”™äº†æˆ¿é—´ï¼Œè¿›äº†æ‰«åœ°åƒ§çš„å±‹å­ï¼Œå‘ç°æ‰«åœ°åƒ§æ­£å¯¹ç€ä¸€å¼ â€œè—å®å›¾â€å˜¿å˜¿å‚»ç¬‘ã€‚\n\n22:00ï¼Œä½ åœ¨æˆ¿é—´é‡Œç£¨ä½ çš„ç”Ÿé”ˆé“å‰‘ï¼Œå‡†å¤‡ä»Šå¤©æ—©ä¸Šæ­£å¼å‘å¸ˆçˆ¶æ‘Šç‰Œã€‚ç»“æœï¼Œä»Šå¤©ä¸€æ—©ï¼Œå¸ˆçˆ¶è¢«å‘ç°æ­»åœ¨äº†å¯†å®¤ä¹¦æˆ¿é‡Œã€‚æ­»å› ç«Ÿç„¶æ˜¯è¢«ä¸€æŠŠé’å™¨å‡»ä¸­åè„‘ï¼Œä¸”ä¹¦æˆ¿é—¨çª—åé”ï¼Œæ˜¯ä¸€é—´å®Œç¾çš„å¯†å®¤ï¼\n\nã€ä½ çš„ä»»åŠ¡ã€‘\n1. æ’‡æ¸…è‡ªå·±çš„å«Œç–‘ï¼ˆè™½ç„¶ä½ æ ¹æœ¬æ²¡çœ‹æ¸…ä»»ä½•ä¸œè¥¿ï¼‰ã€‚\n2. ææ¸…æ¥šè´¾ç³Šæ¶‚æ˜¨æ™šåˆ°åº•åœ¨å¹²å˜›ã€‚\n3. æŒ‡å‡º5ä¸ªNPCï¼ˆç®¡å®¶è€æã€å¨å­ç‹äºŒæ²³ã€å°å¸ˆå¦¹çµå„¿ã€éš”å£è€ç‹ã€æ‰«åœ°åƒ§ï¼‰ä¸­è°æ˜¯çœŸå‡¶ã€‚\n\nã€NPCä¿¡æ¯ç‚¹ã€‘\n- ç®¡å®¶è€æï¼šæœ€è¿‘è¿·ä¸Šäº†ç‚’è‚¡ï¼Œå¬è¯´èµ”å¾—åº•è£¤éƒ½ä¸å‰©äº†ã€‚\n- å¨å­ç‹äºŒæ²³ï¼šå¸ˆçˆ¶ä¸€ç›´å«Œå¼ƒä»–åšçš„é¥­éš¾åƒï¼Œå°¤å…¶æ˜¯æ˜¨å¤©é‚£é¡¿ç‚¸é¸¡ã€‚\n- å°å¸ˆå¦¹çµå„¿ï¼šå¥¹å…¶å®ä¸å–œæ¬¢è´¾ç³Šæ¶‚ï¼Œå¥¹å–œæ¬¢éš”å£è€ç‹ã€‚\n- éš”å£è€ç‹ï¼šå¤–å·â€œç¿»å¢™é¾™â€ï¼Œè½»åŠŸäº†å¾—ï¼Œä½†æ€»æ˜¯åŠå¤œç¿»é”™å¢™ã€‚\n- æ‰«åœ°åƒ§ï¼šåœ¨å±±åº„æ‰«åœ°äºŒåå¹´ï¼Œä»ä¸è¯´è¯ï¼Œä½†ä»–æ˜¨æ™šå±…ç„¶åœ¨ç¬‘ã€‚",
                clues: ["å¤§å¸ˆå…„æ‰åœ¨æ²Ÿé‡Œçš„çœ¼é•œ", "æ‰«åœ°åƒ§æˆ¿é—´é‡Œçš„é‡‘ç–®è¯", "ç®¡å®¶è€æå¸¦è¡€çš„æ‰‹å¸•"]
            },
            "role_2": {
                name: "äºŒå¸ˆå¼Ÿ Â· è´¾ç³Šæ¶‚",
                script: "ã€èƒŒæ™¯æ•…äº‹ã€‘\nä½ æ˜¯æ–­å‰‘å±±åº„çš„äºŒå¸ˆå¼Ÿï¼Œåå­—å«ç³Šæ¶‚ï¼Œä½†ä½ å…¶å®æ¯”è°éƒ½ç²¾æ˜ã€‚ä½ æ ¹æœ¬ä¸ä¼šæ­¦åŠŸï¼Œä½ æ˜¯é ç€ç»™å¸ˆçˆ¶ä»£å†™â€œæ±Ÿæ¹–å›å¿†å½•â€æ··è¿›å±±åº„çš„ã€‚å¸ˆçˆ¶ç­”åº”æ­»åæŠŠå±±åº„ä¼ ç»™ä½ ï¼Œæ¡ä»¶æ˜¯ä½ å¾—æŠŠä»–å†™æˆæ­¦æ—ç¬¬ä¸€ç¾ç”·å­ã€‚å…¶å®ä½ å¿ƒé‡Œå¾ˆè‹¦ï¼Œå› ä¸ºå¸ˆçˆ¶ä¸ä»…é•¿å¾—åƒå¦‚èŠ±ï¼Œè¿˜æœ‰ä¸¥é‡çš„å£è‡­ã€‚\n\nã€æ˜¨æ™šç»å†ã€‘\næ˜¨æ™š 19:30ï¼Œä½ å¸¦ç€å†™å¥½çš„ã€Šå¸ˆçˆ¶æ’©å¦¹è®°ã€‹å»ä¹¦æˆ¿æ‰¾å¸ˆçˆ¶ã€‚å¸ˆçˆ¶æ­£åƒç€ç‚¸é¸¡ï¼Œå¿ƒæƒ…å¾ˆå¥½ã€‚ä»–å‘Šè¯‰ä½ ï¼Œä»–å…¶å®å¹¶æ²¡æœ‰æŠŠâ€œæ–­æ°´å‰‘â€è—åœ¨å±±åº„ï¼Œè€Œæ˜¯å–ç»™äº†éš”å£è€ç‹æ¢äº†é…’é’±ã€‚ä½ å½“æ—¶å°±å´©æºƒäº†ï¼šé‚£æˆ‘å†™è¿™ç ´ä¹¦è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ\n\n20:00ï¼Œä½ ç¦»å¼€ä¹¦æˆ¿æ—¶ï¼Œç”±äºè¿‡åº¦æ‚²ä¼¤ï¼Œé¡ºæ‰‹æ‹¿èµ°äº†æ¡Œä¸Šçš„ä¸€å·â€œå¯†å‡½â€æ“¦çœ¼æ³ªï¼ˆå…¶å®é‚£å°±æ˜¯å¤§å¸ˆå…„çœ‹åˆ°çš„å•çº¸ï¼‰ã€‚ä½ è·¯è¿‡èµ°å»Šæ—¶ï¼Œçœ‹è§å¤§å¸ˆå…„ç”„æ­£ä¹‰è¶´åœ¨è‰ä¸›é‡Œï¼Œä¸çŸ¥é“åœ¨æ‰¾ä»€ä¹ˆï¼ˆå…¶å®ä»–åœ¨æ‰¾çœ¼é•œï¼‰ã€‚\n\n21:30ï¼Œä½ å¿ƒæœ‰ä¸ç”˜ï¼Œæƒ³å»å·å¸ˆçˆ¶çš„ç§æˆ¿é’±ã€‚å¿«åˆ°ä¹¦æˆ¿æ—¶ï¼Œä½ çœ‹è§å¨å­ç‹äºŒæ²³æ¨ç€ä¸€è¾†è¿çŒªçš„å°è½¦ä»ä¹¦æˆ¿åé—¨ç»è¿‡ã€‚ç‹äºŒæ²³ç¥è‰²æ…Œå¼ ï¼Œå˜´é‡Œå¿µå¨ç€ï¼šâ€œè¿™å¤´çŒªæ€ä¹ˆè¿™ä¹ˆé‡ï¼Ÿâ€\n\n23:00ï¼Œä½ æ½œå…¥ä¹¦æˆ¿ï¼Œå‘ç°å¸ˆçˆ¶å·²ç»å€’åœ¨åœ°ä¸Šæ²¡æ°”äº†ã€‚ä½ å“åäº†ï¼Œåˆšæƒ³å«äººï¼Œå´å‘ç°å¸ˆçˆ¶åè„‘å‹ºä¸Šæ’ç€ä¸€æŠŠâ€¦â€¦æ€çŒªåˆ€ï¼ç”±äºå®³æ€•è¢«å½“æˆå‡¶æ‰‹ï¼Œä½ èµ¶ç´§æŠŠæ€çŒªåˆ€æ‹”å‡ºæ¥æ‰”åˆ°äº†çª—å¤–ã€‚å¥‡æ€ªçš„æ˜¯ï¼Œä½ å‘ç°ä¹¦æˆ¿çš„çª—æˆ·æ˜¯ä»é‡Œé¢åé”çš„ï¼Œé—¨ä¹Ÿæ˜¯é”ç€çš„ã€‚ä½ æœ€åæ˜¯é€šè¿‡é€šé£ç®¡é“çˆ¬å‡ºæ¥çš„ã€‚\n\nã€ä½ çš„ä»»åŠ¡ã€‘\n1. æ©é¥°ä½ æ‹”æ‰å‡¶å™¨çš„è¡Œä¸ºï¼Œå¦åˆ™ä½ ä¼šè¢«å½“æˆæ¯åç°åœºçš„ä»çŠ¯ã€‚\n2. å¼„æ¸…æ¥šå¤§å¸ˆå…„ä¸ºä»€ä¹ˆåŠå¤œåœ¨è‰ä¸›é‡Œã€‚ \n3. åœ¨5ä¸ªNPCä¸­æ‰¾å‡ºçœŸå‡¶ã€‚\n\nã€NPCä¿¡æ¯ç‚¹ã€‘\n- å¨å­ç‹äºŒæ²³ï¼šä»–é‚£æŠŠæ€çŒªåˆ€å¯æ˜¯ç¥–ä¼ çš„ï¼Œè§†è‹¥çå®ã€‚\n- å°å¸ˆå¦¹çµå„¿ï¼šå¥¹æ˜¨æ™šä¸€ç›´åœ¨åèŠ±å›­å“­ï¼Œè¯´æ˜¯å¼„ä¸¢äº†é‡è¦çš„å®šæƒ…ä¿¡ç‰©ã€‚\n- ç®¡å®¶è€æï¼šæ˜¨æ™šä»–åœ¨ä¹¦æˆ¿é—¨å£å¾˜å¾Šäº†å¥½ä¹…ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€å¼ æ¬ æ¡ã€‚\n- éš”å£è€ç‹ï¼šæ­¤äººè½»åŠŸæé«˜ï¼Œèƒ½ç¼©éª¨é’»å…¥ç‹­å°çš„é€šé£å£ã€‚\n- æ‰«åœ°åƒ§ï¼šä»–å…¶å®æ˜¯åº„ä¸»çš„äº²å¼Ÿå¼Ÿï¼Œä¸¤äººä¸ºäº†äº‰å¤ºåº„ä¸»ä¹‹ä½ä¸åˆå¤šå¹´ã€‚",
                clues: ["çª—å¤–è‰ä¸›é‡Œçš„æ€çŒªåˆ€", "å¨å­ç‹äºŒæ²³ç¼ºå¤±çš„å›´è£™", "å°å¸ˆå¦¹æ‰è½çš„ç»£èŠ±é‹"]
            }
        },
        commonClues: [
            "1. ç°åœºçš„å¯†å®¤æƒ…å†µï¼šé—¨çª—åé”ï¼Œå”¯ä¸€çš„å…¥å£æ˜¯çª„å°çš„é€šé£ç®¡é“ã€‚",
            "2. å°¸æ£€æŠ¥å‘Šï¼šæ­»è€…åè„‘å—é’å™¨é‡åˆ›ï¼Œè‡´å‘½ä¼¤å¹¶éæ¯’è¯ã€‚",
            "3. ç‚¸é¸¡æ®‹ä½™ï¼šç»æ£€æµ‹ï¼Œç‚¸é¸¡é‡Œç¡®å®æœ‰å°‘é‡éº»é†‰å‰‚ï¼Œä¸è¶³ä»¥è‡´å‘½ï¼Œä½†èƒ½è®©äººæ˜ç¡ã€‚",
            "4. ä¹¦æˆ¿åœ°æ¯¯ï¼šåœ°æ¯¯ä¸Šæœ‰æ˜æ˜¾çš„æ‹–æ‹½ç—•è¿¹ï¼Œä¸”æ®‹ç•™äº†ä¸€äº›ç°å°˜å’ŒçŒªæ¯›ã€‚",
            "5. é€šé£å£ï¼šé€šé£å£æå…¶ç‹­çª„ï¼Œåªæœ‰èº«æç˜¦å°æˆ–ä¼šç¼©éª¨åŠŸçš„äººæ‰èƒ½é€šè¿‡ã€‚",
            "6. ç®¡å®¶è€æçš„è´¦æœ¬ï¼šè®°å½•ç€åº„ä¸»æ¬ ä»–ä¸‰å¹´çš„å·¥èµ„æ²¡å‘ã€‚"
        ],
        truth: "ã€çœŸç›¸å¤ç›˜ã€‘\n\n1. å‡¶æ‰‹èº«ä»½ï¼šçœŸå‡¶æ˜¯ã€å¨å­ç‹äºŒæ²³ã€‘ã€‚\n\n2. æ€äººåŠ¨æœºï¼šåº„ä¸»ä¸ä»…æ¬ è–ªï¼Œè¿˜ç»å¸¸ç¾è¾±ç‹äºŒæ²³åšçš„èœï¼Œæ˜¨æ™šæ›´æ˜¯è¾±éª‚ä»–â€œæ€çŒªçš„å‘½â€ã€‚ç‹äºŒæ²³å†³å®šæŠ¥å¤ã€‚\n\n3. çŠ¯ç½ªæ‰‹æ³•ï¼š\n   - 18:30ï¼Œç‹äºŒæ²³åœ¨ç‚¸é¸¡é‡Œä¸‹äº†éº»é†‰è¯ï¼ˆå¹¶éæ¯’è¯ï¼Œæ‰€ä»¥ç”„æ­£ä¹‰é—»åˆ°çš„æä»å‘³åªæ˜¯è°ƒæ–™ï¼‰ã€‚\n   - 20:30ï¼Œåº„ä¸»æ˜ç¡ã€‚ç‹äºŒæ²³åˆ©ç”¨â€œè¿çŒªè½¦â€ä½œæ©æŠ¤ã€‚å…¶å®ï¼Œä»–å¹¶æ²¡æœ‰ç›´æ¥è¿›å…¥ä¹¦æˆ¿æ€äººã€‚ä»–æ˜¯åˆ©ç”¨äº†ä¹¦æˆ¿çš„ç»“æ„ã€‚\n   - 21:00ï¼Œç‹äºŒæ²³ä»é€šé£ç®¡é“æ”¾å…¥äº†ä¸€åªâ€œå—æƒŠçš„é‡çŒªâ€ï¼ˆè¿™ä¹Ÿæ˜¯ç”„æ­£ä¹‰å¬åˆ°çŒªå«çš„åŸå› ï¼‰ã€‚é‡çŒªåœ¨ä¹¦æˆ¿ä¹±çªœï¼Œæœ€åæ’å€’äº†ä¹¦æ¶ä¸Šçš„é‡ç‰©ï¼ˆæˆ–è€…æ˜¯ç‹äºŒæ²³äº‹å…ˆå›ºå®šåœ¨é‡çŒªèº«ä¸Šçš„æ€çŒªåˆ€ï¼‰ï¼Œæ„å¤–ï¼ˆæˆ–è€…åŠæ•…æ„åœ°ï¼‰ç ¸ä¸­äº†åº„ä¸»çš„åè„‘ã€‚\n   - å…³é”®çº¿ç´¢ï¼šä¹¦æˆ¿é‡Œçš„ã€çŒªæ¯›ã€‘å’Œã€æ‹–æ‹½ç—•è¿¹ã€‘ã€‚ç‹äºŒæ²³éšååˆ©ç”¨ä¸€æ ¹ç»†é•¿çš„é±¼çº¿é€šè¿‡é€šé£ç®¡é“æ”¶å›äº†æ§åˆ¶é‡çŒªçš„ç»³ç´¢ã€‚ç”±äºé‡çŒªä½“ç§¯å¤§ï¼Œå…¶å®ç‹äºŒæ²³æ˜¯é€šè¿‡ä¹¦æˆ¿åé—¨çš„â€œå® ç‰©ä¸“ç”¨é€šé“â€å°†çŒªå¼„è¿›å»çš„ï¼ˆä½†ä»–è°ç§°æ˜¯è¿çŒªï¼‰ã€‚\n\n4. è¯¯å¯¼é¡¹ï¼š\n   - ç®¡å®¶è€æè™½ç„¶æœ‰è¡€æ‰‹å¸•ï¼Œé‚£æ˜¯ä»–å› ä¸ºç‚’è‚¡èµ”é’±æ€¥å¾—æµé¼»è¡€æ“¦çš„ã€‚\n   - æ‰«åœ°åƒ§åœ¨ç¬‘æ˜¯å› ä¸ºä»–ç»ˆäºç ´è§£äº†è—å®å›¾ï¼ˆå…¶å®æ˜¯å¼ å±±åº„åœ°å›¾ï¼‰ã€‚\n   - è´¾ç³Šæ¶‚æ‹”æ‰æ€çŒªåˆ€çš„è¡Œä¸ºå¹²æ‰°äº†è§†å¬ï¼Œä½†æ€çŒªåˆ€ç¡®å®æ˜¯å¨å­ä¸¢æ‰çš„é‚£æŠŠã€‚\n\n5. æ€»ç»“ï¼šè¿™æ˜¯ä¸€åœºåˆ©ç”¨â€œåŠ¨ç‰©æ€äººâ€ä¼ªé€ çš„å¯†å®¤æ¡ˆä»¶ã€‚å¨å­ç‹äºŒæ²³æœ¬æƒ³å“å”¬åº„ä¸»ï¼Œæ²¡æƒ³åˆ°å¤±æ‰‹ï¼ˆæˆ–è€…é¡ºæ°´æ¨èˆŸï¼‰å°†å…¶æ€å®³ã€‚"
    };

    let playerState = { roleKey: '', name: '' };

    window.onload = () => {
        document.getElementById('game-title-display').innerText = CONFIG.title;
        const select = document.getElementById('role-select');
        for (let key in CONFIG.roles) {
            let opt = document.createElement('option');
            opt.value = key;
            opt.innerText = CONFIG.roles[key].name;
            select.appendChild(opt);
        }
    };

    function switchView(step) {
        document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('view' + step).classList.remove('hidden');
        document.getElementById('step' + step).classList.add('active');
        window.scrollTo(0,0);
    }

    function toStep2() {
        const name = document.getElementById('player-name').value;
        if(!name) { alert("æ±Ÿæ¹–å„¿å¥³è¯·ç•™ä¸‹å§“åï¼"); return; }
        playerState.name = name;
        playerState.roleKey = document.getElementById('role-select').value;
        const roleData = CONFIG.roles[playerState.roleKey];
        document.getElementById('display-role-name').innerText = roleData.name + " Â· ç§˜ç±å†…å®¹";
        document.getElementById('display-script').innerText = roleData.script;
        switchView(2);
    }

    function toStep3() {
        const roleData = CONFIG.roles[playerState.roleKey];
        const container = document.getElementById('clue-container');
        container.innerHTML = '';
        const allClues = [...roleData.clues, ...CONFIG.commonClues];
        allClues.forEach(c => {
            const div = document.createElement('div');
            div.className = 'clue-card';
            div.innerText = c;
            container.appendChild(div);
        });
        switchView(3);
    }

    function toStep4() {
        if(confirm("ç¡®å®šè¿›å…¥çœŸç›¸é˜¶æ®µå—ï¼Ÿå»ºè®®è®¨è®ºæ—¶é—´ä¸å°‘äº30åˆ†é’Ÿï¼Œå¦åˆ™ä½ ä¼šè¢«æ±Ÿæ¹–åŒé“è€»ç¬‘ï¼")) {
            switchView(4);
        }
    }

    function revealTruth() {
        const pass = document.getElementById('truth-pass').value;
        if(pass === CONFIG.password) {
            document.getElementById('display-truth').innerText = CONFIG.truth;
            document.getElementById('truth-box').classList.remove('hidden');
            document.getElementById('truth-pass').disabled = true;
        } else {
            alert("å£ä»¤ä¸å¯¹ï¼çœ‹æ¥ä½ è¿˜æ²¡æ‚Ÿé€è¿™æ±Ÿæ¹–ï¼");
        }
    }
</script>

</body>
</html>
