<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰§æœ¬æ€å¤§å… - æç¬”ç»˜æ¢¨èŠ±</title>
    <style>
        :root {
            --apple-bg: #f5f5f7;
            --apple-card: rgba(255, 255, 255, 0.8);
            --apple-text: #1d1d1f;
            --apple-text-secondary: #86868b;
            --apple-blue: #0071e3;
            --apple-blur: saturate(180%) blur(20px);
            --gold-finish: linear-gradient(135deg, #fffcf0 0%, #fff 100%);
            --nav-bg: rgba(245, 245, 247, 0.72);
        }

        /* æ·±è‰²æ¨¡å¼å˜é‡æ˜ å°„ */
        [data-theme='dark'] {
            --apple-bg: #000000;
            --apple-card: rgba(28, 28, 30, 0.8);
            --apple-text: #f5f5f7;
            --apple-text-secondary: #8e8e93;
            --apple-blue: #0a84ff;
            --nav-bg: rgba(0, 0, 0, 0.72);
            --gold-finish: linear-gradient(135deg, #2c2c2e 0%, #1c1c1e 100%);
        }

        body {
            background-color: var(--apple-bg);
            color: var(--apple-text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            margin: 0; -webkit-font-smoothing: antialiased;
            transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* å¯¼èˆªæ  */
        nav { position: sticky; top: 0; z-index: 100; background: var(--nav-bg); backdrop-filter: var(--apple-blur); border-bottom: 1px solid rgba(0,0,0,0.1); padding: 12px 0; }
        .nav-content { max-width: 1100px; margin: 0 auto; padding: 0 40px; display: flex; justify-content: space-between; align-items: center; }

        /* åˆ†ç±»é€‰æ‹©å™¨ (iOS Style) */
        .filter-wrapper { max-width: 1100px; margin: 30px auto 0; padding: 0 40px; }
        .segmented-control {
            display: inline-flex; background: rgba(118, 118, 128, 0.12); border-radius: 10px; padding: 2px; position: relative;
        }
        .segment-item {
            padding: 6px 20px; font-size: 0.85rem; font-weight: 500; cursor: pointer; border-radius: 8px; transition: 0.2s; position: relative; z-index: 1;
        }
        .segment-item.active { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.12); }
        [data-theme='dark'] .segment-item.active { background: #636366; color: #fff; }

        /* æœç´¢æ¡† */
        .search-area { max-width: 1100px; margin: 20px auto; padding: 0 40px; }
        .search-input { 
            width: 100%; max-width: 300px; border: none; background: rgba(118,118,128,0.12); 
            padding: 10px 15px; border-radius: 12px; font-size: 0.9rem; color: var(--apple-text); outline: none;
        }

        /* å‰§æœ¬å¡ç‰‡åŒº */
        header { max-width: 1100px; margin: 40px auto; padding: 0 40px; }
        header h1 { font-size: 3rem; font-weight: 800; letter-spacing: -1.5px; margin: 0; }
        .container { max-width: 1100px; margin: 0 auto 100px; padding: 0 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }

        .script-card {
            background: var(--apple-card); border-radius: 20px; padding: 30px;
            text-decoration: none; color: inherit; transition: 0.4s cubic-bezier(0.2, 0, 0, 1);
            border: 1px solid rgba(128,128,128,0.1); display: flex; flex-direction: column; justify-content: space-between;
        }
        .script-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        /* çŠ¶æ€ä¸æ ‡ç­¾ */
        .tag { font-size: 0.7rem; background: var(--apple-blue); color: #fff; padding: 3px 8px; border-radius: 6px; font-weight: 600; }
        .completed-badge { display: none; font-size: 0.7rem; color: #d4af37; font-weight: 700; }
        .script-card.completed .completed-badge { display: block; }
        .script-card.completed { border-color: rgba(212, 175, 55, 0.3); }

        /* æ·±è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        .theme-toggle {
            position: fixed; bottom: 30px; left: 30px; width: 44px; height: 44px; 
            background: var(--apple-card); backdrop-filter: var(--apple-blur);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid rgba(128,128,128,0.1); z-index: 1000;
        }

        footer { padding: 60px 0; text-align: center; color: var(--apple-text-secondary); font-size: 0.8rem; }
    </style>
</head>
<body data-theme="light">

    <nav>
        <div class="nav-content">
            <div class="nav-logo">Offline LARP</div>
            <div style="font-size: 0.7rem; color: var(--apple-text-secondary); cursor: pointer;" onclick="localStorage.clear();location.reload();">é‡ç½®æ¡£æ¡ˆ</div>
        </div>
    </nav>

    <div class="filter-wrapper">
        <div class="segmented-control">
            <div class="segment-item active" onclick="filterType('å…¨éƒ¨', this)">å…¨éƒ¨</div>
            <div class="segment-item" onclick="filterType('å¤é£', this)">å¤é£</div>
            <div class="segment-item" onclick="filterType('ç°ä»£', this)">ç°ä»£</div>
            <div class="segment-item" onclick="filterType('ç¡¬æ ¸', this)">ç¡¬æ ¸</div>
        </div>
    </div>

    <div class="search-area">
        <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢æ¡ˆå..." oninput="runFilter()">
    </div>

    <header>
        <h1>å‰§æœ¬å¤§å…</h1>
        <p>çœŸç›¸ï¼Œéšè—åœ¨è¢«å¿½ç•¥çš„ç»†èŠ‚ä¹‹ä¸­ã€‚</p>
    </header>

    <main class="container" id="scriptGrid">
        <a href="script1.html" class="script-card" data-type="å¤é£" data-script-id="script1" onclick="markAsComplete('script1')">
            <div>
                <div style="display:flex; justify-content:space-between;">
                    <span class="tag">å¤é£æ­¦ä¾ </span>
                    <span class="completed-badge">âœ“ å·²ç»“æ¡ˆ</span>
                </div>
                <h2 style="margin:15px 0 10px;">æ–­å‰‘å±±åº„çš„æ€çŒªåˆ€</h2>
                <p style="color:var(--apple-text-secondary); font-size:0.9rem;">åº„ä¸»é™¨è½ï¼Œä¹¦æˆ¿å†…å´å……æ–¥ç€çŒªé¸£ã€‚è¿™æ˜¯æ­¦æ—çš„ç§˜é—»è¿˜æ˜¯è’è¯çš„çœŸç›¸ï¼Ÿ</p>
            </div>
            <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
        </a>

        <a href="script2.html" class="script-card" data-type="ç°ä»£" data-script-id="script2" onclick="markAsComplete('script2')">
            <div>
                <div style="display:flex; justify-content:space-between;">
                    <span class="tag">ç°ä»£æ‚¬ç–‘</span>
                    <span class="completed-badge">âœ“ å·²ç»“æ¡ˆ</span>
                </div>
                <h2 style="margin:15px 0 10px;">åå¹´Â·è¿·é›¾</h2>
                <p style="color:var(--apple-text-secondary); font-size:0.9rem;">åå¹´å‰çš„æœªè§£è°œæ¡ˆï¼Œäº”ä¸ªçµé­‚ã€‚å°˜å°çš„çœŸç›¸å°†åœ¨ä»Šå¤œè§£å¼€ã€‚</p>
            </div>
            <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
        </a>
    </main>

    <div class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</div>

    <footer>
        <p>Â© 2026 æç¬”ç»˜æ¢¨èŠ± åˆ¶ä½œ</p>
    </footer>

    <script>
        let currentType = 'å…¨éƒ¨';

        // --- è¿‡æ»¤é€»è¾‘ ---
        function filterType(type, el) {
            // æ›´æ–°UI
            document.querySelectorAll('.segment-item').forEach(item => item.classList.remove('active'));
            el.classList.add('active');
            currentType = type;
            runFilter();
        }

        function runFilter() {
            const searchVal = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.script-card');

            cards.forEach(card => {
                const type = card.getAttribute('data-type');
                const title = card.querySelector('h2').innerText.toLowerCase();
                
                const typeMatch = (currentType === 'å…¨éƒ¨' || type.includes(currentType));
                const searchMatch = title.includes(searchVal);

                card.style.display = (typeMatch && searchMatch) ? 'flex' : 'none';
            });
        }

        // --- æ·±è‰²æ¨¡å¼é€»è¾‘ ---
        function toggleTheme() {
            const body = document.body;
            const current = body.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }

        // --- åˆå§‹åŒ– ---
        window.onload = () => {
            // åŠ è½½ä¸»é¢˜
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            
            // åŠ è½½å·²å®Œæˆè®°å½•
            const completed = JSON.parse(localStorage.getItem('larp_achievements') || '[]');
            completed.forEach(id => {
                const card = document.querySelector(`[data-script-id="${id}"]`);
                if (card) card.classList.add('completed');
            });
        };

        function markAsComplete(id) {
            let completed = JSON.parse(localStorage.getItem('larp_achievements') || '[]');
            if (!completed.includes(id)) {
                completed.push(id);
                localStorage.setItem('larp_achievements', JSON.stringify(completed));
            }
        }
    </script>
</body>
</html>
