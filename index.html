<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰§æœ¬æ€å¤§å… - æç¬”ç»˜æ¢¨èŠ±</title>
    <style>
        :root {
            --apple-bg: #f5f5f7;
            --apple-card: rgba(255, 255, 255, 0.8);
            --apple-text: #1d1d1f;
            --apple-text-secondary: #86868b;
            --apple-blue: #0071e3;
            --apple-blur: saturate(180%) blur(20px);
            --gold-finish: linear-gradient(135deg, #fffcf0 0%, #fff 100%);
            --nav-bg: rgba(245, 245, 247, 0.72);
        }

        /* æ·±è‰²æ¨¡å¼å˜é‡æ˜ å°„ */
        [data-theme='dark'] {
            --apple-bg: #000000;
            --apple-card: rgba(28, 28, 30, 0.8);
            --apple-text: #f5f5f7;
            --apple-text-secondary: #8e8e93;
            --apple-blue: #0a84ff;
            --nav-bg: rgba(0, 0, 0, 0.72);
            --gold-finish: linear-gradient(135deg, #2c2c2e 0%, #1c1c1e 100%);
        }

        body {
            background-color: var(--apple-bg);
            color: var(--apple-text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            margin: 0; -webkit-font-smoothing: antialiased;
            transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* å¯¼èˆªæ  */
        nav { position: sticky; top: 0; z-index: 100; background: var(--nav-bg); backdrop-filter: var(--apple-blur); border-bottom: 1px solid rgba(0,0,0,0.1); padding: 12px 0; }
        .nav-content { max-width: 1100px; margin: 0 auto; padding: 0 40px; display: flex; justify-content: space-between; align-items: center; }

        /* å¼¹å¹•æ»šåŠ¨åŒº */
        .danmu-bar { background: #000; height: 40px; overflow: hidden; display: flex; align-items: center; position: relative; }
        #danmu-wrapper { display: flex; white-space: nowrap; position: absolute; animation: scroll-left 40s linear infinite; will-change: transform; }
        .danmu-item { font-size: 0.85rem; color: #fff; margin-right: 60px; display: flex; align-items: center; opacity: 0.9; }
        .danmu-item span { color: #5fb9ff; margin-right: 8px; font-weight: 600; }

        @keyframes scroll-left {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-100%); }
        }

        /* å¼¹å¹•å‘å°„å™¨ */
        .input-area {
            background: #fff; padding: 15px 40px; border-bottom: 1px solid #e1e1e1;
            display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .danmu-input {
            width: 100%; max-width: 500px; border: 1px solid #d2d2d7; border-radius: 20px;
            padding: 8px 15px; font-size: 0.9rem; outline: none; transition: 0.3s;
        }
        .danmu-input:focus { border-color: var(--apple-blue); box-shadow: 0 0 0 4px rgba(0,113,227,0.1); }
        .send-btn {
            background: var(--apple-blue); color: #fff; border: none; padding: 8px 20px;
            border-radius: 20px; font-size: 0.9rem; cursor: pointer; white-space: nowrap;
            transition: background-color 0.3s;
        }
        .send-btn:hover { background-color: #0056b3; }

        header { max-width: 1100px; margin: 60px auto 40px; padding: 0 40px; }
        header h1 { font-size: 3.5rem; font-weight: 700; letter-spacing: -1.5px; margin-bottom: 10px; }

        .container { max-width: 1100px; margin: 0 auto 100px; padding: 0 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }


        
        /* åˆ†ç±»é€‰æ‹©å™¨ (iOS Style) */
        .filter-wrapper { max-width: 1100px; margin: 30px auto 0; padding: 0 40px; }
        .segmented-control {
            display: inline-flex; background: rgba(118, 118, 128, 0.12); border-radius: 10px; padding: 2px; position: relative;
        }
        .segment-item {
            padding: 6px 20px; font-size: 0.85rem; font-weight: 500; cursor: pointer; border-radius: 8px; transition: 0.2s; position: relative; z-index: 1;
        }
        .segment-item.active { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.12); }
        [data-theme='dark'] .segment-item.active { background: #636366; color: #fff; }

        /* æœç´¢æ¡† */
        .search-area { max-width: 1100px; margin: 20px auto; padding: 0 40px; }
        .search-input { 
            width: 100%; max-width: 300px; border: none; background: rgba(118,118,128,0.12); 
            padding: 10px 15px; border-radius: 12px; font-size: 0.9rem; color: var(--apple-text); outline: none;
        }

        /* å‰§æœ¬å¡ç‰‡åŒº */
        header { max-width: 1100px; margin: 40px auto; padding: 0 40px; }
        header h1 { font-size: 3rem; font-weight: 800; letter-spacing: -1.5px; margin: 0; }
        .container { max-width: 1100px; margin: 0 auto 100px; padding: 0 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }

        .script-card {
            background: var(--apple-card); border-radius: 20px; padding: 30px;
            text-decoration: none; color: inherit; transition: 0.4s cubic-bezier(0.2, 0, 0, 1);
            border: 1px solid rgba(128,128,128,0.1); display: flex; flex-direction: column; justify-content: space-between;
        }
        .script-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        /* çŠ¶æ€ä¸æ ‡ç­¾ */
        .tag { font-size: 0.7rem; background: var(--apple-blue); color: #fff; padding: 3px 8px; border-radius: 6px; font-weight: 600; }
        .completed-badge { display: none; font-size: 0.7rem; color: #d4af37; font-weight: 700; }
        .script-card.completed .completed-badge { display: block; }
        .script-card.completed { border-color: rgba(212, 175, 55, 0.3); }

        /* æ·±è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        .theme-toggle {
            position: fixed; bottom: 30px; left: 30px; width: 44px; height: 44px; 
            background: var(--apple-card); backdrop-filter: var(--apple-blur);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid rgba(128,128,128,0.1); z-index: 1000;
        }

        footer { padding: 60px 0; text-align: center; color: var(--apple-text-secondary); font-size: 0.8rem; }
    </style>
</head>
<body data-theme="light">

    <nav>
        <div class="nav-content">
            <div class="nav-logo">Offline LARP</div>
            <div style="font-size: 0.7rem; color: var(--apple-text-secondary); cursor: pointer;" onclick="localStorage.clear();location.reload();">é‡ç½®æ¡£æ¡ˆ</div>
        </div>
    </nav>

    <!-- å¼¹å¹•æ»šåŠ¨åŒº -->
    <div class="danmu-bar">
        <div id="danmu-wrapper"></div>
    </div>

    <!-- å¼¹å¹•å‘å°„å™¨ -->
    <div class="input-area">
        <input type="text" class="danmu-input" id="danmuInput" placeholder="è¾“å…¥ä½ çš„æ„Ÿæ‚Ÿæˆ–ç–‘é—®...">
        <button class="send-btn" onclick="sendDanmu()">å‘å°„</button>
    </div>

    <div class="filter-wrapper">
        <div class="segmented-control">
            <div class="segment-item active" onclick="filterType('å…¨éƒ¨', this)">å…¨éƒ¨</div>
            <div class="segment-item" onclick="filterType('å¤é£', this)">å¤é£</div>
            <div class="segment-item" onclick="filterType('ç°ä»£', this)">ç°ä»£</div>
            <div class="segment-item" onclick="filterType('ç¡¬æ ¸', this)">ç¡¬æ ¸</div>
            <div class="segment-item" onclick="filterType('æ¬¢ä¹', this)">æ¬¢ä¹</div>
            <div class="segment-item" onclick="filterType('æƒ…æ„Ÿ', this)">æƒ…æ„Ÿ</div>
        </div>
    </div>

    <div class="search-area">
        <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢æ¡ˆå..." oninput="runFilter()">
    </div>

    <header>
        <h1>å‰§æœ¬å¤§å…</h1>
        <p>çœŸç›¸ï¼Œéšè—åœ¨è¢«å¿½ç•¥çš„ç»†èŠ‚ä¹‹ä¸­ã€‚</p>
    </header>

    <main class="container" id="scriptGrid">
<a href="script1.html" class="script-card" data-type="å¤é£" data-script-id="script1" onclick="markAsComplete('script1')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
                <span class="tag">å¤é£æ­¦ä¾ </span>
                <span style="font-size: 0.7rem; background: rgba(128,128,128,0.1); padding: 3px 8px; border-radius: 6px; color: var(--apple-text-secondary); display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 2äºº
                </span>
            </div>
            <span class="completed-badge">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px;">æ–­å‰‘å±±åº„çš„æ€çŒªåˆ€</h2>
        <p style="color:var(--apple-text-secondary); font-size:0.9rem;">åº„ä¸»é™¨è½ï¼Œä¹¦æˆ¿å†…å´å……æ–¥ç€çŒªé¸£ã€‚è¿™æ˜¯æ­¦æ—çš„ç§˜é—»è¿˜æ˜¯è’è¯çš„çœŸç›¸ï¼Ÿ</p>
    </div>
    <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
</a>

<a href="script2.html" class="script-card" data-type="ç°ä»£" data-script-id="script2" onclick="markAsComplete('script2')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
                <span class="tag">ç°ä»£æ‚¬ç–‘</span>
                <span style="font-size: 0.7rem; background: rgba(128,128,128,0.1); padding: 3px 8px; border-radius: 6px; color: var(--apple-text-secondary); display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 5äºº
                </span>
            </div>
            <span class="completed-badge">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px;">åå¹´Â·è¿·é›¾</h2>
        <p style="color:var(--apple-text-secondary); font-size:0.9rem;">åå¹´å‰çš„æœªè§£è°œæ¡ˆï¼Œäº”ä¸ªçµé­‚ã€‚å°˜å°çš„çœŸç›¸å°†åœ¨ä»Šå¤œè§£å¼€ã€‚</p>
    </div>
    <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
</a>

    <a href="script3.html" class="script-card" data-type="å¤é£ æƒ…æ„Ÿ" data-script-id="script3" onclick="markAsComplete('script3')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
                <span class="tag" style="background: linear-gradient(135deg, #8a6d3b, #a87c3b); color: #f5f1e8;">å¤é£æƒ…æ„Ÿ</span>
                <span style="font-size: 0.7rem; background: rgba(138, 108, 59, 0.1); padding: 3px 8px; border-radius: 6px; color: #a87c3b; display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 3äºº
                </span>
            </div>
            <span class="completed-badge" style="display:none;">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px; color: #a87c3b; font-family: 'STKaiti', serif;">é•¿å‘½é”</h2>
        <p style="color:#8a9a9a; font-size:0.9rem; line-height:1.5;">æ±Ÿå—æ²ˆå®¶åº„ï¼Œä¸€æ¡©æ‚¬å‘½ä¹‹å±€ï¼Œä¸‰æ®µé”™ä»˜æ·±æƒ…ã€‚é•¿å‘½é”é”å¾—ä½å²å²å¹³å®‰ï¼Œå¯é”å¾—ä½äººå¿ƒå‘èƒŒï¼Ÿ</p>
    </div>
    <div style="color:#a87c3b; font-weight:600; margin-top:20px; font-family: 'STKaiti', serif;">è¿›å…¥æ²ˆå®¶åº„ ã€‰</div>
</a>

        <a href="script4.html" class="script-card" data-type="ç°ä»£ æ¬¢ä¹" data-script-id="script4" onclick="markAsComplete('script4')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
               <span class="tag">ç°ä»£æ¬¢ä¹</span>
               <span style="font-size: 0.7rem; background: rgba(128,128,128,0.1); padding: 3px 8px; border-radius: 6px; color: var(--apple-text-secondary); display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 2äºº
                </span>
            </div>
            <span class="completed-badge" style="display:none;">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px;">å®Œç¾çš„ä¸åœ¨åœºè¯æ˜</h2>
        <p style="color:var(--apple-text-secondary); font-size:0.9rem; line-height:1.5;">ä½ çš„çœ¼ç›åœ¨æ¬ºéª—ä½ ã€‚</p>
    </div>
    <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
</a>

        <a href="script5.html" class="script-card" data-type="ç°ä»£ ç¡¬æ ¸" data-script-id="script5" onclick="markAsComplete('script5')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
               <span class="tag">æ ¡å›­æƒŠæ‚š</span>
               <span style="font-size: 0.7rem; background: rgba(128,128,128,0.1); padding: 3px 8px; border-radius: 6px; color: var(--apple-text-secondary); display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 5äºº
                </span>
            </div>
            <span class="completed-badge" style="display:none;">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px;">æ ¡å›­ä¸å¯æ€è®®äº‹ä»¶</h2>
        <p style="color:var(--apple-text-secondary); font-size:0.9rem; line-height:1.5;">ä¸­å…ƒèŠ‚å¤œï¼Œäº”äººæ¢é™©æ—§æ•™å­¦æ¥¼ã€‚æ¯äº•è¾¹æµ®ç°è¯¡å¼‚å¾®ç¬‘ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç§˜å¯†â€¦â€¦çœŸç›¸ï¼Œè—åœ¨æ—¶é—´è£‚ç¼é‡Œã€‚</p>
    </div>
    <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
</a>
        <a href="script6.html" class="script-card" data-type="å¤é£ æƒ…æ„Ÿ" data-script-id="script6" onclick="markAsComplete('script6')">
    <div>
        <div style="display:flex; justify-content:space-between; align-items: center;">
            <div style="display: flex; gap: 6px;">
               <span class="tag">å¤é£</span>
               <span class="tag">æƒ…æ„Ÿæ²‰æµ¸</span>
               <span style="font-size: 0.7rem; background: rgba(128,128,128,0.1); padding: 3px 8px; border-radius: 6px; color: var(--apple-text-secondary); display: flex; align-items: center; gap: 3px;">
                    ğŸ‘¤ 2äºº
                </span>
            </div>
            <span class="completed-badge" style="display:none;">âœ“ å·²ç»“æ¡ˆ</span>
        </div>
        <h2 style="margin:15px 0 10px;">æ±Ÿæœˆä¸æ¸¡</h2>
        <p style="color:var(--apple-text-secondary); font-size:0.9rem; line-height:1.5;">æ¸¡å£èŒ¶è›‹é¦™ï¼Œä¸€åªé‹ä¸¤ä¸ªäººã€‚é˜¿æ¡‚çš„èˆ¹ç¯™æ’‘å¾—èµ·ä¸€æ±Ÿå¯’æ°´ï¼Œå´æ’‘ä¸èµ·é˜¿å®è—èµ·çš„ç»£èŠ±â€¦â€¦</p>
    </div>
    <div style="color:var(--apple-blue); font-weight:600; margin-top:20px;">å¼€å§‹ä½“éªŒ ã€‰</div>
</a>
        
    </main>

    <div class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</div>

    <footer>
        <p>Â© 2026 æç¬”ç»˜æ¢¨èŠ±</p>
        <div style="margin-top:10px; font-size:0.75rem; color:var(--apple-text-secondary);">
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            ä»Šæ—¥ç”¨æˆ·åˆ°è®¿: <span id="busuanzi_value_site_uv"></span> ä½
        </div>
    </footer>

    <script>
        let currentType = 'å…¨éƒ¨';

        // --- å¼¹å¹•é€»è¾‘ ---
        const defaultDanmu = [
            { nick: "ç³»ç»Ÿ", msg: "æ¬¢è¿æ¥åˆ°ä¾¦æ¢ç”µå°ï¼Œè¾“å…¥æ„Ÿæ‚Ÿå¹¶ç‚¹å‡»å‘å°„ï¼" },
            { nick: "åŒ¿å", msg: "æ–­å‰‘å±±åº„é‚£ä¸ªç»“å±€æˆ‘ç›´æ¥è£‚å¼€..." },
            { nick: "å¤©è¾¹çš„äº‘", msg: "æœ‰äººæƒ³ä¸€èµ·ç©å¤é£æœ¬å—ï¼Ÿæ±‚ç»„é˜Ÿï¼" },
            { nick: "å°M", msg: "æ–­å‰‘å±±åº„å¥½ç©å—ï¼Ÿæ±‚æ¨è" },
            { nick: "é›¨è½æˆèŠ±99", msg: "ä»Šå¤©åˆšç©äº†é•¿å‘½é”ï¼Œæœ‰äººäº¤æµä¸‹å—ï¼Ÿ" },
            { nick: "è´ªåƒçš„å©·å©·", msg: "æƒ³ç©æ¬¢ä¹æœ¬ï¼Œæœ‰äººä¸€èµ·å—ï¼Ÿç¼ºäººå–Šæˆ‘ï¼" },
            { nick: "æ— äººåŒº", msg: "ç¬¬ä¸€æ¬¡ç©ï¼Œæœ‰æ–°æ‰‹æ•™ç¨‹å—ï¼Ÿ" },
            { nick: "åŒ¿å", msg: "å“ªä¸ªæœ¬æ¯”è¾ƒç®€å•å•Šï¼Ÿæ±‚æ¨èæ–°æ‰‹æœ¬" },
            { nick: "ä¾¦æ¢ç”²", msg: "åå¹´è¿·é›¾çš„ç»†èŠ‚æ§çœ‹è¿‡æ¥ã€‚" }
        ];

        function renderDanmu() {
            const wrapper = document.getElementById('danmu-wrapper');
            const myDanmu = JSON.parse(localStorage.getItem('my_danmus') || '[]');
            const allDanmu = [...defaultDanmu, ...myDanmu];
            wrapper.innerHTML = allDanmu.map(item => `
                <div class="danmu-item"><span>ğŸ•µï¸ ${item.nick}:</span> ${item.msg}</div>
            `).join('');
            
            // ç¡®ä¿åŠ¨ç”»è¿è¡Œ
            wrapper.style.animation = 'none';
            setTimeout(() => {
                wrapper.style.animation = 'scroll-left 40s linear infinite';
            }, 10);
        }

        function sendDanmu() {
            const input = document.getElementById('danmuInput');
            const val = input.value.trim();
            if (!val) return;
            
            // åˆå§‹åŒ–å­˜å‚¨
            if (!localStorage.getItem('my_danmus')) {
                localStorage.setItem('my_danmus', JSON.stringify([]));
            }
            
            let myDanmu = JSON.parse(localStorage.getItem('my_danmus') || '[]');
            myDanmu.push({ nick: "æˆ‘", msg: val });
            localStorage.setItem('my_danmus', JSON.stringify(myDanmu));
            input.value = '';
            renderDanmu();
            
            const btn = document.querySelector('.send-btn');
            btn.innerText = "å·²å‘å°„!";
            setTimeout(() => btn.innerText = "å‘å°„", 1000);
        }

        // --- è¿‡æ»¤é€»è¾‘ ---
        function filterType(type, el) {
            // æ›´æ–°UI
            document.querySelectorAll('.segment-item').forEach(item => item.classList.remove('active'));
            el.classList.add('active');
            currentType = type;
            runFilter();
        }

        function runFilter() {
            const searchVal = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.script-card');

            cards.forEach(card => {
                const type = card.getAttribute('data-type');
                const title = card.querySelector('h2').innerText.toLowerCase();
                
                const typeMatch = (currentType === 'å…¨éƒ¨' || type.includes(currentType));
                const searchMatch = title.includes(searchVal);

                card.style.display = (typeMatch && searchMatch) ? 'flex' : 'none';
            });
        }

        // --- æ·±è‰²æ¨¡å¼é€»è¾‘ ---
        function toggleTheme() {
            const body = document.body;
            const current = body.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }

        // --- æˆå°±é€»è¾‘ ---
        function markAsComplete(id) {
            let completed = JSON.parse(localStorage.getItem('larp_achievements') || '[]');
            if (!completed.includes(id)) {
                completed.push(id);
                localStorage.setItem('larp_achievements', JSON.stringify(completed));
            }
            refreshAchievements();
        }

        function refreshAchievements() {
            const completed = JSON.parse(localStorage.getItem('larp_achievements') || '[]');
            completed.forEach(id => {
                const card = document.querySelector(`[data-script-id="${id}"]`);
                if (card) card.classList.add('completed');
            });
        }

        // --- åˆå§‹åŒ– ---
        window.onload = () => {
            // åŠ è½½ä¸»é¢˜
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            
            // æ¸²æŸ“å¼¹å¹•
            renderDanmu();
            
            // åŠ è½½å·²å®Œæˆè®°å½•
            refreshAchievements();
            
            // å¼¹å¹•è¾“å…¥æ¡†å›è½¦æ”¯æŒ
            const danmuInput = document.getElementById('danmuInput');
            if (danmuInput) {
                danmuInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendDanmu();
                    }
                });
            }
        };
    </script>
</body>
</html>






