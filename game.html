<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»çº¿å‰§æœ¬æ€å¹³å° - åˆ›ä½œè€…ç‰ˆ</title>
    <style>
        :root {
            --bg: #1a1a1d;
            --card-bg: #25252b;
            --text: #e0e0e0;
            --accent: #c0392b;
            --primary: #2980b9;
        }
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; background: var(--bg); color: var(--text); margin: 0; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        
        /* é¡¶éƒ¨è¿›åº¦æ¡ */
        .step-bar { display: flex; justify-content: space-between; margin-bottom: 20px; background: var(--card-bg); padding: 10px; border-radius: 8px; font-size: 0.85rem; }
        .step { color: #555; transition: 0.3s; }
        .step.active { color: var(--accent); font-weight: bold; border-bottom: 2px solid var(--accent); }

        /* å¡ç‰‡è®¾è®¡ */
        .card { background: var(--card-bg); padding: 25px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); min-height: 300px; }
        h1, h2 { color: var(--accent); text-align: center; }
        .script-text { white-space: pre-wrap; background: #1e1e24; padding: 15px; border-radius: 5px; border: 1px solid #333; margin-top: 15px; font-size: 1.05rem; }
        
        /* çº¿ç´¢ */
        .clue-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .clue-card { background: #34495e; padding: 10px; border-radius: 4px; font-size: 0.9rem; border-left: 4px solid var(--accent); }

        /* äº¤äº’å…ƒç´  */
        select, input { width: 100%; padding: 12px; margin: 10px 0; background: #111; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        button { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 1rem; margin-top: 20px; transition: 0.2s; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-secondary { background: #7f8c8d; margin-top: 10px; }

        .hidden { display: none; }
        .warning { color: #f1c40f; font-size: 0.8rem; margin-top: 5px; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <div class="step-bar">
        <span id="step1" class="step active">1.é€‰æ‹©è§’è‰²</span>
        <span id="step2" class="step">2.é˜…è¯»å‰§æœ¬</span>
        <span id="step3" class="step">3.æœè¯è®¨è®º</span>
        <span id="step4" class="step">4.æ­å¼€çœŸç›¸</span>
    </div>

    <div id="view1" class="card">
        <h1>å‰§æœ¬æ€ï¼š<span id="game-title-display">æœªå‘½åå‰§æœ¬</span></h1>
        <p style="text-align: center; color: #888;">è¯·å°†æ‰‹æœºä¼ ç»™ä¸‹ä¸€ä½ç©å®¶é€‰æ‹©è§’è‰²</p>
        <div style="margin-top: 40px;">
            <label>ä½ çš„åå­—ï¼š</label>
            <input type="text" id="player-name" placeholder="è¯·è¾“å…¥ä½ çš„æ˜µç§°">
            <label>é€‰æ‹©åˆ†é…ç»™ä½ çš„è§’è‰²ï¼š</label>
            <select id="role-select"></select>
            <button onclick="toStep2()">ç¡®å®šå¹¶é”å®šè§’è‰²</button>
            <p class="warning">âš ï¸ ä¸€æ—¦é”å®šï¼Œä»–äººå°†æ— æ³•åœ¨æœ¬è®¾å¤‡æŸ¥çœ‹ä½ çš„å‰§æœ¬</p>
        </div>
    </div>

    <div id="view2" class="card hidden">
        <h2 id="display-role-name">è§’è‰²å</h2>
        <div class="script-text" id="display-script">å‰§æœ¬åŠ è½½ä¸­...</div>
        <button onclick="toStep3()">è¯»å®Œäº†ï¼Œè¿›å…¥æœè¯è®¨è®ºé˜¶æ®µ</button>
    </div>

    <div id="view3" class="card hidden">
        <h2>è¯æ®ä¸çº¿ç´¢</h2>
        <p style="font-size: 0.9rem; color: #888;">ä»¥ä¸‹æ˜¯ä½ çš„ä¸“å±çº¿ç´¢åŠå…¬å…±å‘ç°ï¼š</p>
        <div id="clue-container" class="clue-grid"></div>
        <button onclick="toStep4()">åœ†æ¡Œä¼šè®®ç»“æŸï¼ŒæŸ¥çœ‹çœŸç›¸</button>
        <button class="btn-secondary" onclick="toStep2()">è¿”å›é‡è¯»å‰§æœ¬</button>
    </div>

    <div id="view4" class="card hidden">
        <h1 style="color: #f1c40f;">ğŸš¨ ç»ˆæé˜²å‰§é€é”å®š</h1>
        <p style="text-align: center;">çœŸç›¸å·²è¢«åŠ å¯†ã€‚è¯·ç¡®ä¿æ‰€æœ‰ç©å®¶å‡å·²å®ŒæˆæŠ•ç¥¨å¹¶åŒæ„å…¬å¼€çœŸç›¸ã€‚</p>
        
        <div style="background: #000; padding: 15px; border-radius: 8px; margin: 20px 0;">
            <label>è¯·è¾“å…¥çœŸç›¸è§£é”å¯†ç ï¼š</label>
            <input type="password" id="truth-pass" placeholder="è¯¢é—®ä¸»æŒäººæˆ–è¾“å…¥é¢„è®¾å¯†ç ">
            <button onclick="revealTruth()">ç¡®è®¤æ­å¼€çœŸç›¸</button>
        </div>
        
        <div id="truth-box" class="hidden">
            <h2 style="color: #2ecc71;">å¤ç›˜æ­ç§˜</h2>
            <div class="script-text" id="display-truth" style="border-color: #2ecc71;"></div>
            <button class="btn-secondary" onclick="location.reload()">é€€å‡ºå¹¶æ¸…ç†ç—•è¿¹</button>
        </div>
    </div>
</div>

<script>
    /* ============================================================
       åˆ›ä½œè€…é…ç½®åŒºï¼šåœ¨è¿™é‡Œä¿®æ”¹ä½ çš„å‰§æœ¬å†…å®¹
       ============================================================ */
    const CONFIG = {
        title: "æ·±å¤œçµå ‚çš„é’Ÿå£°", // å‰§æœ¬åç§°
        password: "666",        // æœ€ç»ˆçœŸç›¸çš„è§£é”å¯†ç 
        roles: {
            "role_1": {
                name: "ç®¡å®¶ Â· è€é™ˆ",
                script: "ä½ æ˜¯è¿™åº§å®…å­çš„è€ç®¡å®¶ã€‚æ­»è€…å¯¹ä½ æœ‰æ©ï¼Œä½†ä¹ŸæŒæ¡ç€ä½ æŒªç”¨å…¬æ¬¾çš„è¯æ®ã€‚\n\nä»Šæ™š 22:00ï¼Œä½ æ›¾å»è¿‡ä¹¦æˆ¿...",
                clues: ["è€é™ˆå£è¢‹é‡Œçš„é’¥åŒ™", "ä¸€å¼ è¢«æ’•æ¯çš„è´¦å•"]
            },
            "role_2": {
                name: "é•¿å­ Â· å¤§å¼ ",
                script: "ä½ æ˜¯æ­»è€…çš„é•¿å­ã€‚ä½ æ€¥éœ€è¿™ç¬”é—äº§æ¥å¡«è¡¥ç”Ÿæ„ä¸Šçš„äºç©ºã€‚\n\nä½ ä¸€ç›´è§‰å¾—çˆ¶äº²åå¿ƒå¼Ÿå¼Ÿ...",
                clues: ["å¤§å¼ çš„æ¬ æ¡", "ä¹¦æˆ¿é—¨å£çš„æ³¥åœŸ"]
            },
            "role_3": {
                name: "ä¾¦æ¢ Â· é˜¿å¼º",
                script: "å—é‚€å‰æ¥çš„ä¾¦æ¢ã€‚ä½ æ²¡æœ‰æ€äººåŠ¨æœºï¼Œéœ€è¦é€šè¿‡çº¿ç´¢æ‰¾å‡ºçœŸå‡¶ã€‚",
                clues: ["æ”¾å¤§é•œ", "æ­»è€…çš„é—å˜±"]
            }
        },
        commonClues: ["ç°åœºåœæ‘†çš„é—¹é’Ÿ", "æ¡Œä¸Šå‰©ä¸‹åŠæ¯çš„å’–å•¡"], // å…¬å…±çº¿ç´¢
        truth: "å‡¶æ‰‹æ˜¯ç®¡å®¶è€é™ˆã€‚ä»–åœ¨å’–å•¡é‡Œä¸‹è¯åï¼Œåˆ©ç”¨é’¥åŒ™è¿›å…¥ä¹¦æˆ¿æ€äººï¼Œå¹¶ä¼ªé€ äº†ä¸åœ¨åœºè¯æ˜..." // æœ€ç»ˆçœŸç›¸
    };

    /* ============================================================
       æ ¸å¿ƒé€»è¾‘åŒºï¼šéå¿…è¦è¯·å‹¿ä¿®æ”¹
       ============================================================ */
    let playerState = {
        roleKey: '',
        name: ''
    };

    // åˆå§‹åŒ–è§’è‰²ä¸‹æ‹‰æ¡†
    window.onload = () => {
        document.getElementById('game-title-display').innerText = CONFIG.title;
        const select = document.getElementById('role-select');
        for (let key in CONFIG.roles) {
            let opt = document.createElement('option');
            opt.value = key;
            opt.innerText = CONFIG.roles[key].name;
            select.appendChild(opt);
        }
    };

    function switchView(step) {
        document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('view' + step).classList.remove('hidden');
        document.getElementById('step' + step).classList.add('active');
        window.scrollTo(0,0);
    }

    function toStep2() {
        const name = document.getElementById('player-name').value;
        if(!name) { alert("è¯·è¾“å…¥ä½ çš„ç§°å‘¼"); return; }
        
        playerState.name = name;
        playerState.roleKey = document.getElementById('role-select').value;
        
        const roleData = CONFIG.roles[playerState.roleKey];
        document.getElementById('display-role-name').innerText = roleData.name;
        document.getElementById('display-script').innerText = roleData.script;
        
        switchView(2);
    }

    function toStep3() {
        const roleData = CONFIG.roles[playerState.roleKey];
        const container = document.getElementById('clue-container');
        container.innerHTML = '';
        
        // åˆå¹¶ä¸ªäººçº¿ç´¢å’Œå…¬å…±çº¿ç´¢
        const allClues = [...roleData.clues, ...CONFIG.commonClues];
        allClues.forEach(c => {
            const div = document.createElement('div');
            div.className = 'clue-card';
            div.innerText = c;
            container.appendChild(div);
        });
        
        switchView(3);
    }

    function toStep4() {
        if(confirm("ç¡®å®šè¿›å…¥çœŸç›¸é˜¶æ®µå—ï¼Ÿè¿›å…¥åå°†æ— æ³•è¿”å›è®¨è®ºï¼")) {
            switchView(4);
        }
    }

    function revealTruth() {
        const pass = document.getElementById('truth-pass').value;
        if(pass === CONFIG.password) {
            document.getElementById('display-truth').innerText = CONFIG.truth;
            document.getElementById('truth-box').classList.remove('hidden');
            document.getElementById('truth-pass').disabled = true;
        } else {
            alert("å¯†ç é”™è¯¯ï¼ŒçœŸç›¸ä¾ç„¶è¢«æ©ç›–ï¼");
        }
    }
</script>

</body>
</html>